// Test multiple SMS scenario - CommonJS version\nconst { createClient } = require('@supabase/supabase-js')\n\nconst supabaseUrl = 'https://jyvgjcagmmtiqgexqgwa.supabase.co'\nconst supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imp5dmdqY2FnbW10aXFnZXhxZ3dhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc0MzA2MzQsImV4cCI6MjA3MzAwNjYzNH0.hftscrp2fspxoSFZ78V9xRYSg6y3Ag4Hx_5vEbiviwk'\n\nconst supabase = createClient(supabaseUrl, supabaseKey)\n\nasync function testMultipleSMS() {\n  console.log('🧪 Testing multiple SMS with real names...')\n  console.log('📱 All SMS will be sent to: 0812222331')\n  \n  try {\n    // Simulate attendees data\n    const attendees = [\n      {\n        name: 'John Smith',\n        phone: '0812222331'\n      },\n      {\n        name: 'Sarah Johnson', \n        phone: '0812222331'\n      },\n      {\n        name: 'Michael Davis',\n        phone: '0812222331'\n      }\n    ]\n\n    console.log('\\n👥 Sending SMS to:', attendees.map(a => a.name).join(', '))\n\n    // Call the SMS Edge Function directly\n    const { data, error } = await supabase.functions.invoke('send-rsvp-sms', {\n      body: {\n        rsvpId: 'test-multiple-' + Date.now(),\n        attendees: attendees\n      }\n    })\n\n    if (error) {\n      console.error('❌ SMS Error:', error)\n      return\n    }\n\n    console.log('\\n📊 Results:')\n    console.log('✅ Success:', data.success)\n    console.log('📈 Total Attempted:', data.totalAttempted)\n    console.log('✅ Successful:', data.successful)\n    console.log('❌ Failed:', data.failed)\n\n    console.log('\\n🎫 Invitation Numbers:')\n    if (data.invitationNumbers) {\n      data.invitationNumbers.forEach(inv => {\n        console.log(`  ${inv.name}: ${inv.invitationNumber}`)\n      })\n    }\n\n    console.log('\\n📱 SMS Details:')\n    if (data.results) {\n      data.results.forEach(result => {\n        const status = result.success ? '✅' : '❌'\n        console.log(`  ${status} ${result.name} - ${result.invitationNumber || 'N/A'}`)\n        if (result.messageId) console.log(`     Message ID: ${result.messageId}`)\n        if (result.error) console.log(`     Error: ${result.error}`)\n      })\n    }\n\n    console.log('\\n💬 Sample SMS Message Format:')\n    console.log('═'.repeat(50))\n    console.log('Dear John Smith,')\n    console.log('')\n    console.log('Welcome to Farm Aris Grand Opening!')\n    console.log('')\n    console.log('Your invitation: FA123456789')\n    console.log('Date: 17-18 Jan 2025')\n    console.log('Location: Grootfontein, Namibia')\n    console.log('')\n    console.log('Lucky Draw Alert: Present this SMS to')\n    console.log('participate in our lucky draw - 3 winners')\n    console.log('will be selected!')\n    console.log('')\n    console.log('See you there!')\n    console.log('Farm Aris Team')\n    console.log('═'.repeat(50))\n\n    console.log('\\n🎉 Test completed successfully!')\n    console.log('📱 Check phone 0812222331 for 3 SMS messages')\n    console.log('🎫 Each person has a unique invitation number')\n    console.log('🎲 Lucky draw info included in all messages')\n\n  } catch (error) {\n    console.error('❌ Test failed:', error.message || error)\n  }\n}\n\ntestMultipleSMS()"